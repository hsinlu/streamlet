{"version":3,"sources":["image-uploader.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"image-uploader.js","sourcesContent":["/**\n * image uploader\n * @param  {[type]} $ [description]\n * @return {[type]}   [description]\n */\n(function ($) {\n\t$(function() {\n\t\tvar img = $(\".image-uploader img\");\n\t\tvar file = $(\".image-uploader input[type=file]\");\n\t\tvar close = $(\".image-uploader .close\");\n\n\t\tif (img.attr('src')) {\n\t\t\timg.css(\"opacity\", \"1\");\n\t\t\tclose.show();\n\t\t};\n\n\t\tclose.click(function() {\n\t\t\tfile.replaceWith(file = file.clone(true));\n\t\t\timg.css(\"opacity\", \"0\");\n\t\t\tclose.hide();\n\t\t});\n\n\t\timg.click(function () {\n\t\t\tfile.click();\n\t\t});\n\n\t\tfile.change(function() {\n\t\t\tvar path = file.val();\n     \t\tvar ext = path.substring(path.lastIndexOf(\".\") + 1).toLowerCase();\n     \t\t// gif在IE浏览器暂时无法显示\n     \t\tif(ext != \"png\" && ext != \"jpg\" && ext != \"jpeg\"){\n         \t\talert(\"文件必须为图片！\"); return;\n     \t\t}\n     \t\t// IE浏览器\n     \t\tif (document.all) {\n        \t\tfile.select();\n        \t\tvar reallocalpath = document.selection.createRange().text;\n         \t\tvar ie6 = /msie 6/i.test(navigator.userAgent);\n         \t\t// IE6浏览器设置img的src为本地路径可以直接显示图片\n         \t\tif (ie6) img.src = reallocalpath;\n         \t\telse {\n             \t\t// 非IE6版本的IE由于安全问题直接设置img的src无法显示本地图片，但是可以通过滤镜来实现\n             \t\timg.style.filter = \"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='image',src=\\\"\" + reallocalpath + \"\\\")\";\n            \t\t// 设置img的src为base64编码的透明图片 取消显示浏览器默认图片\n            \t\timg.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\";\n        \t\t}\n     \t\t} else {\n\t\t\t\tvar srcFile = file[0].files[0];\n\t    \t\tvar reader = new FileReader();\n\t    \t\treader.readAsDataURL(srcFile);\n\t    \t\treader.onload = function(e) {\n\t        \t\timg.attr(\"src\", e.target.result);\n\t        \t\timg.css(\"opacity\", \"1\");\n\t        \t\tclose.show();\n\t     \t\t}\n     \t\t}\n\t\t});\n\t});\n})(window.jQuery);"],"sourceRoot":"/source/"}